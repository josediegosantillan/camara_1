CONFIG_ESP32_SPIRAM_SUPPORT=y
CONFIG_SPIRAM_MODE_OCT=n
CONFIG_SPIRAM_SPEED_80M=y
CONFIG_ESPTOOLPY_FLASHFREQ_80M=y
CONFIG_SPIRAM_CACHE_WORKAROUND=y
CONFIG_OV2640_SUPPORT=y
CONFIG_ESP32_DEFAULT_CPU_FREQ_240=y

# ========================================
# OPTIMIZACIONES DE RENDIMIENTO PARA STREAMING
# ========================================

# --- TCP/IP Stack Tuning ---
# Buffers TCP más grandes para throughput de video
CONFIG_LWIP_TCP_SND_BUF_DEFAULT=32768
CONFIG_LWIP_TCP_WND_DEFAULT=32768
CONFIG_LWIP_TCP_RECVMBOX_SIZE=32
CONFIG_LWIP_TCPIP_RECVMBOX_SIZE=64

# Más conexiones TCP activas
CONFIG_LWIP_MAX_ACTIVE_TCP=8
CONFIG_LWIP_MAX_SOCKETS=16

# Habilitar TCP High Speed Retransmission
CONFIG_LWIP_TCP_HIGH_SPEED_RETRANSMISSION=y

# --- IRAM Optimizations ---
# Poner funciones críticas de LWIP en IRAM (más rápido)
CONFIG_LWIP_IRAM_OPTIMIZATION=y

# --- HTTP Server ---
CONFIG_HTTPD_MAX_REQ_HDR_LEN=1024
CONFIG_HTTPD_ERR_RESP_NO_DELAY=y

# --- WiFi Performance ---
# Usar SPIRAM para buffers WiFi
CONFIG_SPIRAM_TRY_ALLOCATE_WIFI_LWIP=y

# --- Cámara ---
# Asegurar 3 frame buffers en PSRAM
CONFIG_CAMERA_FB_IN_PSRAM=y
